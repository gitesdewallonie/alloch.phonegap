<!DOCTYPE html>
<html>
  <head>
  <title></title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	<meta charset="utf-8">


	<!-- iPad/iPhone specific css below, add after your main css >
	<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
	<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />		
	-->
	<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
	<script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
     <link href="/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
     <script src="jquery-1.7.1.min.js" type="text/javascript"></script>
     <script src="jquery.mobile-1.0.min.js" type="text/javascript"></script>
     <script type="text/javascript"
         src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=false  "></script>
    <script type="text/javascript">
    
    


    //Lien call ajax pour POC
    //http://gitesdewallonie.be/selectedDays?hebPk=81&month=1&year=2012&range=1

    // google
    //http://maps.googleapis.com/maps/api/geocode/json?address=XXX&sensor=false

	// If you want to prevent dragging, uncomment this section
	/*
	function preventBehavior(e) 
	{ 
      e.preventDefault(); 
    };
	document.addEventListener("touchmove", preventBehavior, false);
	*/
	
	/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
	see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
	for more details -jm */
	/*
	function handleOpenURL(url)
	{
		// TODO: do something with the url passed in.
	}
	*/
	
	function onBodyLoad()
	{		
		document.addEventListener("deviceready", onDeviceReady, false);
	}
	
	/* When this function is called, PhoneGap has been initialized and is ready to roll */
	/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
	see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
	for more details -jm */
    
	function onDeviceReady()
	{
	    alert("ok");
	
		//navigator.notification.alert("PhoneGap is working");		
	}
    
    
    var onSuccess = function(position) {
      $("#resultBlock").html('Latitude: '          + position.coords.latitude          + '\n' +
              'Longitude: '         + position.coords.longitude         + '\n' +
              'Altitude: '          + position.coords.altitude          + '\n' +
              'Accuracy: '          + position.coords.accuracy          + '\n' +
              'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
              'Heading: '           + position.coords.heading           + '\n' +
              'Speed: '             + position.coords.speed             + '\n' +
              'Timestamp: '         + new Date(position.timestamp)      + '\n');
              
             var url = "http://maps.google.com/maps/api/staticmap?center=" +  position.coords.latitude + "," +position.coords.longitude + "&zoom=13&size=160x240&maptype=roadmap&key=MyGoogleMapsAPIKey&sensor=true";
            document.getElementById('map').setAttribute('src',url);
    };

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }

   
    
    
    
    $(document).ready(function() {
      $("#testLink").click(function(e) {
         e.preventDefault();
         $("#resultBlock").html("Getting the funk - stand by...");    
         $.get(" http://clavius.affinitic.be:8877/plone/getMobileClosestHebs?address=canadiens+hyon", {}, function(data) {
             console.log(data);
             $("#resultBlock").html("<div> we received the values </div>");
          })
      });
      
      $("#geoLink").click(function(e) {
           e.preventDefault();
           $("#resultBlock").html("Getting the positions - stand by...");
            navigator.geolocation.getCurrentPosition(onSuccess, onError);
        });
    
         $("#searchButton").click(function(e) {
               e.preventDefault();
               $("#resultBlock").html("Getting the positions - stand by...");
                $.get("http://maps.googleapis.com/maps/api/geocode/json?address="+$('#searchBox').val()+"&sensor=false", {}, function(data) {
                     console.log(data);
                     $("#resultBlock").html("<div> we received the values </div>");
                  })
            });
            
          
    });
    </script>
  </head>
  <body onload="onBodyLoad();">
	<h1>GDW Mobile!</h1>
    
    <div data-role="content">    
      <a data-role="button" id="testLink" rel="external">Bring the data</a><br />
      <a id="geoLink" rel="external">Get the geolocalisation</a><br />
      <div data-role="fieldcontain">
           <label for="search">Search Input:</label>
           <input type="search" name="password" id="search" value="" />
       </div>
      <input type="text" name="search" id="searchBox" value="" data-theme="b" />
      <button type="submit" data-theme="b" id="searchButton">Search</button> <br />
       <a href="tel:+32499529229"> 
           Call Affinitic Customer Support at +32499529229
      </a>
      <div >
          <h3>Result</h3>
          <p id="resultBlock"></p>
      </div>
    </div>
     <img id="map" />
  </body>
</html>
